---
import { getPermalink } from '~/utils/permalinks';

export interface Props {
  title: string;
  buttonText: string;
}

const { title = await Astro.slots.render('title'), buttonText } = Astro.props;
---

<section class="scroll-mt-16" id="contactForm">
  <div class="mb-10 md:mx-auto md:mb-12 max-w-3xl">
    <h3
      class="text-3xl md:text-4xl font-bold leading-tighter mb-4 font-heading text-purple-500 drop-shadow-lg"
      set:html={title}
    />
  </div>
  <form
    class="mb-10 md:mx-auto md:mb-12 max-w-3xl"
    netlify
    netlify-honeypot
    data-netlify-recaptcha="true"
    name="contactForm"
    method="POST"
    action={getPermalink('/success')}
  >
    <p class="hidden">
      <label>
        Don’t fill this out if you’re human: <input name="bot-field" />
      </label>
    </p>
    <input type="hidden" name="form-name" value="contactForm" />
    <!-- Name -->
    <div class="md:flex md:items-center mb-6">
      <div class="md:w-1/3">
        <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="name">Name</label>
      </div>
      <div class="md:w-2/3">
        <input
          class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500"
          id="name"
          type="text"
          name="name"
        />
      </div>
    </div>
    <!-- Email -->
    <div class="md:flex md:items-center mb-6">
      <div class="md:w-1/3">
        <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="email">Email</label>
      </div>
      <div class="md:w-2/3">
        <input
          class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500"
          id="email"
          type="email"
          name="email"
          required
        />
      </div>
    </div>
    <!-- Body -->
    <div class="md:flex md:items-center mb-6">
      <div class="md:w-1/3">
        <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="body">Drop us a line:</label>
      </div>
      <div class="md:w-2/3">
        <textarea
          class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500"
          id="body"
          wrap="soft"
          name="body"
          required></textarea>
      </div>
    </div>
    <!-- Submit -->

    <div class="md:flex md:items-center">
      <div class="md:w-1/3"></div>
      <div class="md:w-2/3">
        <div class="py-2 px-4" data-netlify-recaptcha="true"></div>
      </div>
    </div>
    <div class="md:flex md:items-center">
      <div class="md:w-1/3"></div>
      <div class="md:w-2/3">
        <button
          class="shadow btn btn-primary hover:bg-purple-700 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4"
          type="submit">{buttonText}</button
        >
      </div>
    </div>
  </form>
</section>
